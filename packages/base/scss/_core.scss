// @argentinafreelance/base

@use "sass:list";
@use "sass:map";

// Name of the next breakpoint.
// Null for the last breakpoint.
// -----------------------------------------------------------------------------

@function next($name) {
    $names: map.keys($breakpoints);
    $index: list.index($names, $name);

    @return if($index != null and $index < length($names), nth($names, $index + 1), null);
}

// Minimum breakpoint width.
// Null for the smallest (first) breakpoint.
// -----------------------------------------------------------------------------

@function min($name) {
    $min: map.get($breakpoints, $name);

    @return if($min != 0, $min, null);
}

// Maximum breakpoint width.
// Null for the largest (last) breakpoint.
// -----------------------------------------------------------------------------

@function max($name) {
    $next: next($name);

    @return if($next, min($next) - 0.02, null);
}

// Returns a blank string if smallest breakpoint,
// otherwise returns the name with a dash in front.
// -----------------------------------------------------------------------------

@function infix($name) {
    @return if(min($name) == null, "", "-#{$name}");
}

// Media of at least the minimum breakpoint width.
// No query for the smallest breakpoint.
// -----------------------------------------------------------------------------

@mixin superior-to($name) {
    $min: min($name);

    @if $min {
        @media (min-width: $min) {
            @content;
        }
    } @else {
        @content;
    }
}

// Media of at most the maximum breakpoint width.
// No query for the largest breakpoint.
// -----------------------------------------------------------------------------

@mixin inferior-to($name) {
    $max: max($name);

    @if $max {
        @media (max-width: $max) {
            @content;
        }
    } @else {
        @content;
    }
}

// Media that spans multiple breakpoint widths.
// -----------------------------------------------------------------------------

@mixin between($lower, $upper) {
    $min: min($lower);
    $max: max($upper);

    @if $min != null and $max != null {
        @media (min-width: $min) and (max-width: $max) {
            @content;
        }
    } @else if $max == null {
        @include superior-to($lower) {
            @content;
        }
    } @else if $min == null {
        @include inferior-to($upper) {
            @content;
        }
    }
}

// Media between the breakpoint's minimum and maximum widths.
// -----------------------------------------------------------------------------

@mixin only($name) {
    $min: min($name);
    $max: max($name);

    @if $min != null and $max != null {
        @media (min-width: $min) and (max-width: $max) {
            @content;
        }
    } @else if $max == null {
        @include superior-to($name) {
            @content;
        }
    } @else if $min == null {
        @include inferior-to($name) {
            @content;
        }
    }
}
